
<section>
  <div class="carousel-container snap-inline">
    <div class="carousel-inner">
      <div class="track">
        
          {% assign sorted = site.articles | sort: 'date' | reverse %}
          {% assign aria_id = press.title | url_encode | truncate: 15, "" %}
          {% for article in sorted %}
          <div class="card-container">
          <div class="press-card {{article.type}}">
            <a href="{{ site.baseurl }}{{ article.url }}" aria-labelledby="{{ aria_id }}">
              <div class="article-type">{{article.type}}</div>
              <div class="usa-prose press-img">
                {% if article.image %}
                {% asset "{{ article.image }}" class="" alt="{{ article.title }}" %}
                {% else %}
                {% asset "Placeholder.png" class="margin-right-3" alt="{{ article.title  }}" %}
                {% endif %}
              </div>
              <div>
                <h2 class="body-intro--bold" id="{{ aria_id }}">{{ article.title }}</h2>
                <p class="content">
                  {{ article.content }}
                </p>
              </div>
            </a>
            <p>
              <span class="press-card--press-year">{{ article.posted }} </span>
            </p>
          </div>
        
      </div>
          {% endfor %}
          
        
        
      </div>
    </div>
    <div class="nav">
      <button class="prev">
        <i class="material-icons">
        keyboard_arrow_left
        </i>
      </button>
      <button class="next">
        <i class="material-icons">
        keyboard_arrow_right
        </i>
      </button>
    </div>
  </div>
</section>

<script>
  const prev  = document.querySelector('.prev');
const next = document.querySelector('.next');

const track = document.querySelector('.track');

let carouselWidth = document.querySelector('.carousel-container').offsetWidth;

window.addEventListener('resize', () => {
  carouselWidth = document.querySelector('.carousel-container').offsetWidth;
})

let index = 0;

next.addEventListener('click', () => {
  index++;
  prev.classList.add('show');
  track.style.transform = `translateX(-${index * carouselWidth}px)`;
  
  if (track.offsetWidth - (index * carouselWidth) < carouselWidth) {
    next.classList.add('hide');
  }
})

prev.addEventListener('click', () => {
  index--;
  next.classList.remove('hide');
  if (index === 0) {
    prev.classList.remove('show');
  }
  track.style.transform = `translateX(-${index * carouselWidth}px)`;
})

</script>